<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Chat</title>
<style>
  body { font-family: Arial; margin: 20px; }
  #chat { display:none; }
  #messages div { padding:6px; margin:5px 0; background:#eee; border-radius:6px; }
</style>
</head>
<body>

<!-- GİRİŞ EKRANI -->
<div id="login">
  <h2>Giriş</h2>
  <label>İsim:</label><br>
  <input id="username" type="text"><br><br>

  <label>Şifre:</label><br>
  <input id="password" type="password"><br><br>

  <button onclick="login()">Giriş Yap</button>
  <p id="err" style="color:red;"></p>
</div>

<!-- CHAT -->
<div id="chat">
  <h2>Chat</h2>
  <div id="messages"></div>

  <input id="msg" placeholder="Mesaj yaz...">
  <button onclick="sendMsg()">Gönder</button>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-database-compat.js"></script>

<script>
// Firebase ayarlarını seninle konuştukça doldururum
const firebaseConfig = {
  apiKey: "XXX",
  authDomain: "XXX",
  databaseURL: "XXX",
  projectId: "XXX",
  storageBucket: "XXX",
  messagingSenderId: "XXX",
  appId: "XXX"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let USERNAME = "";
const SECRET_PASSWORD = "1234"; // Buraya kendi şifreni koy

// Giriş fonksiyonu
function login() {
  const name = document.getElementById("username").value.trim();
  const pw = document.getElementById("password").value.trim();
  
  if (!name) { document.getElementById("err").innerText = "İsim gir."; return; }
  if (pw !== SECRET_PASSWORD) { document.getElementById("err").innerText = "Şifre yanlış."; return; }

  USERNAME = name;

  // giriş ekranını kapat chat'i aç
  document.getElementById("login").style.display = "none";
  document.getElementById("chat").style.display = "block";

  loadMessages();
}

// MESAJ GÖNDER
function sendMsg() {
  const text = document.getElementById("msg").value.trim();
  if (!text) return;

  db.ref("messages").push({
    name: USERNAME,   // Firebase'de görürsün
    text: text,       // Chatte görünür
    time: Date.now()
  });

  document.getElementById("msg").value = "";
}

// MESAJLARI YÜKLE (isim gösterilmez)
function loadMessages() {
  db.ref("messages").on("child_added", snap => {
    const m = snap.val();

    // Çette isim GÖSTERİLMİYOR
    const div = document.createElement("div");
    div.innerText = m.text;
    document.getElementById("messages").appendChild(div);
  });
}
</script>

</body>
</html>
